# **12. –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –ü–û**  

## **1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Centralized Logging)**  
**–ü—Ä–æ–±–ª–µ–º–∞**: –í –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ª–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö ‚Üí —Å–ª–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å.  
**–†–µ—à–µ–Ω–∏–µ**: **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Å–±–æ—Ä, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.  

### **ELK-—Å—Ç–µ–∫ (Elasticsearch + Logstash + Kibana)**  
- **Elasticsearch** ‚Äì –ø–æ–∏—Å–∫ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ª–æ–≥–æ–≤ (NoSQL-–±–∞–∑–∞).  
- **Logstash** ‚Äì —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞—Ä—Å–∏–Ω–≥).  
- **Kibana** ‚Äì –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–¥–∞—à–±–æ—Ä–¥—ã, –≥—Ä–∞—Ñ–∏–∫–∏).  

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?**  
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Logstash (–∏–ª–∏ Filebeat) ‚Üí Elasticsearch.  
2. –ê–¥–º–∏–Ω —Å–º–æ—Ç—Ä–∏—Ç –ª–æ–≥–∏ –≤ Kibana.  

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ Logstash**:  
```conf
input { file { path => "/var/log/app.log" } }
filter { grok { match => { "message" => "%{TIMESTAMP:date} %{LOGLEVEL:level} %{GREEDYDATA:msg}" } } }
output { elasticsearch { hosts => ["elasticsearch:9200"] } }
```

### **Grafana Loki**  
- **Loki** ‚Äì —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ (–∫–∞–∫ Prometheus, –Ω–æ –¥–ª—è –ª–æ–≥–æ–≤).  
- **Grafana** ‚Äì –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏ –ª–æ–≥–∏, –∏ –º–µ—Ç—Ä–∏–∫–∏).  
- –≠–∫–æ–Ω–æ–º–∏—á–Ω–µ–µ ELK (–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ).  

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –≤ Grafana**:  
```logql
{app="order-service"} |= "error"
```

---

## **2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Monitoring & Alerting)**  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —É–ø–∞–ª –∏–ª–∏ —Ç–æ—Ä–º–æ–∑–∏—Ç?  
**–†–µ—à–µ–Ω–∏–µ**: **–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ + –∞–ª–µ—Ä—Ç–∏–Ω–≥**.  

### **Prometheus**  
- **Pull-–º–æ–¥–µ–ª—å** (—Å–∞–º —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å —Å–µ—Ä–≤–∏—Å–æ–≤).  
- **–ú–µ—Ç—Ä–∏–∫–∏**: CPU, RAM, HTTP-–∑–∞–ø—Ä–æ—Å—ã, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏.  
- **PromQL** ‚Äì —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤.  

**–ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫–∏ –≤ Spring Boot (Micrometer)**:  
```java
@RestController
public class OrderController {
    private final Counter requestCount = Metrics.counter("order.requests");
    
    @GetMapping("/order")
    public String createOrder() {
        requestCount.increment();
        return "Order created!";
    }
}
```

### **Grafana**  
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏–∑ Prometheus (–∏ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤).  
- **–î–∞—à–±–æ—Ä–¥—ã**: –≥—Ä–∞—Ñ–∏–∫–∏ Latency, Error Rate, Traffic.  

**–ü—Ä–∏–º–µ—Ä PromQL –≤ Grafana**:  
```promql
http_requests_total{status="500"} / http_requests_total * 100
```

**Alerting**:  
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Grafana –∏–ª–∏ Alertmanager (Prometheus).  
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack/Telegram/Email.  

---

## **3. CI/CD (–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –¥–æ—Å—Ç–∞–≤–∫–∞)**  
**–ü—Ä–æ–±–ª–µ–º–∞**: –†—É—á–Ω—ã–µ –¥–µ–ø–ª–æ–∏ ‚Üí –æ—à–∏–±–∫–∏, –º–µ–¥–ª–µ–Ω–Ω–æ.  
**–†–µ—à–µ–Ω–∏–µ**: **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è**.  

### **Jenkins**  
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä CI/CD** (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª—é–±—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã).  
- **–ü–ª—é—Å—ã**: –ì–∏–±–∫–æ—Å—Ç—å, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–ª–∞–≥–∏–Ω–æ–≤.  
- **–ú–∏–Ω—É—Å—ã**: –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.  

**–ü—Ä–∏–º–µ—Ä Jenkinsfile (Declarative Pipeline)**:  
```groovy
pipeline {
    agent any
    stages {
        stage('Build') {
            steps { sh 'mvn package' }
        }
        stage('Test') {
            steps { sh 'mvn test' }
        }
        stage('Deploy') {
            steps { sh 'kubectl apply -f k8s-deployment.yaml' }
        }
    }
}
```

### **GitLab CI / GitHub Actions**  
- **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ Git-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** (–Ω–µ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä).  
- **–ü–ª—é—Å—ã**: –ü—Ä–æ—â–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.  

**–ü—Ä–∏–º–µ—Ä .gitlab-ci.yml**:  
```yaml
stages:
  - build
  - deploy

build-job:
  stage: build
  script:
    - mvn package

deploy-job:
  stage: deploy
  script:
    - kubectl apply -f k8s.yaml
```

**–ü—Ä–∏–º–µ—Ä GitHub Actions**:  
```yaml
name: CI/CD Pipeline
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: mvn package
  deploy:
    needs: build
    run: kubectl apply -f k8s.yaml
```

---

## **4. DevOps: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –∫–æ–¥ (IaC)**  
**–ü—Ä–æ–±–ª–µ–º–∞**: –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ ‚Üí –¥—Ä–µ–π—Ñ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.  
**–†–µ—à–µ–Ω–∏–µ**: **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫–æ–¥**.  

### **Docker**  
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** (–∏–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).  

**–ü—Ä–∏–º–µ—Ä Dockerfile**:  
```dockerfile
FROM openjdk:17
COPY target/app.jar /app.jar
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

### **Kubernetes (K8s)**  
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, self-healing).  

**–ü—Ä–∏–º–µ—Ä deployment.yaml**:  
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: order-service
spec:
  replicas: 3
  template:
    spec:
      containers:
        - name: order-service
          image: my-registry/order-service:latest
          ports:
            - containerPort: 8080
```

### **Terraform**  
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä-–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (AWS, GCP, Azure).  
- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤, —Å–µ—Ç–µ–π, –ë–î.  

**–ü—Ä–∏–º–µ—Ä main.tf (AWS EC2)**:  
```hcl
resource "aws_instance" "app_server" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = "t2.micro"
  tags = {
    Name = "MyAppServer"
  }
}
```

---

## **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**  
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è      | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã                         | –ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å?                          |
|---------------|------------------------------------|-----------------------------------------|
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | ELK, Loki + Grafana                | ELK ‚Äî –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, Loki ‚Äî –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | Prometheus + Grafana               | –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä–æ–≤       |
| **CI/CD**     | Jenkins, GitLab CI, GitHub Actions | Jenkins ‚Äî –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤, GitLab/GitHub ‚Äî –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º |
| **DevOps**    | Docker, K8s, Terraform             | Docker+K8s ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è, Terraform ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞–∫–æ–º |

---

### **–ò—Ç–æ–≥**  
1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: ELK/Loki + Grafana –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–±–ª–µ–º.  
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∏ –∞–ª–µ—Ä—Ç–æ–≤.  
3. **CI/CD**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ —Å–±–æ—Ä–∫—É –∏ –¥–µ–ø–ª–æ–π (Jenkins/GitLab).  
4. **DevOps**: IaC (Terraform) –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (K8s) ‚Äî must-have –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.  

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–æ–∫—Ä–∞—â–∞—é—Ç –≤—Ä–µ–º—è –Ω–∞ —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø–æ–≤—ã—à–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã! üöÄ
